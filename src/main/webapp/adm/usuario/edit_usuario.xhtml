<html   xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui">
    <ui:decorate template="../template/template.xhtml">
        <ui:define name="centro">         

            <f:metadata>
                <f:viewParam name="usuario" value="#{usuarioBean.usuario.idUsuario}" />
                <f:viewAction action="#{usuarioBean.preparaEdicao}"  />

            </f:metadata>


            <p:panel id="painel_edit_usuario" header="Edição de usuários" style="width: 40%;">

                <h:form id="cadatro_usuario">
                    <p:growl id="messages_no_ajax" autoUpdate="true" life="5000" showDetail="false"/>
                    <h:panelGrid columns="2" cellpadding="2">

                        <h:outputText value="Nome: "/>
                        <p:inputText id="nome" size="40" required="true" maxlength="60" value="#{usuarioBean.usuario.nome}"
                                     requiredMessage="O nome é obrigatório"/>

                        <h:outputText value="Login: "/>
                        <p:inputText id="login" size="20" required="true" maxlength="15" value="#{usuarioBean.usuario.login}"
                                     requiredMessage="O login é obrigatório"/>

                        <h:outputText value="Senha Atual: "/>
                        <p:password id="senha" size="20" required="true" maxlength="10" value="#{usuarioBean.usuario.senha}"
                                    requiredMessage="A senha atual deve ser preenchida" />


                        <h:outputText value="Nova senha: "/>
                        <p:password id="nova_senha" size="20" required="false" maxlength="10" 
                                    value="#{usuarioBean.novaSenha}"/>
                        <h:inputHidden value="#{usuarioBean.senhaTemporaria}" id="senha_antiga"/>
                    </h:panelGrid>
                    <p:spacer width="30"/>
                    <p:commandButton value="Salvar alterações" action="#{usuarioBean.update}"   update="messages" ajax="false"
                                     />
                    <p:button value="Cancelar" outcome="/adm/usuario/lista_usuarios"  style="margin-left: 10px;"/>
                    <p:commandButton value="Excluir usuário" style="color: #000; margin-left: 10px;" action="#{usuarioBean.delete(usuarioBean.usuario.idUsuario)}" 
                                     update="messages" ajax="false"/>
                </h:form>
            </p:panel>
        </ui:define>
    </ui:decorate>
</html>